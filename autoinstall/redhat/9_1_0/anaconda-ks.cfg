# Generated by pykickstart v3.32
#version=RHEL9
# Use graphical install
graphical
repo --name="AppStream" --baseurl=http://192.168.87.8/ds/images_file/redhat/9_1_0/AppStream

%pre --interpreter=/bin/bash
echo "Pre-Installation Script" >> ~/script.txt
%end

%post --interpreter=/bin/bash
echo "Post-Installation Script" >> ~/script.txt

# enable root login via ssh
sed -ri 's/#PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config

# enalbe yum proxy
echo -e "proxy=http://192.168.87.7:3128" >> /etc/yum.conf

# yum install epel
yum install -y http://dl.fedoraproject.org/pub/epel/epel-release-latest-9.noarch.rpm

%end

%addon com_redhat_kdump --enable --reserve-mb='auto'

%end

# Keyboard layouts
keyboard --vckeymap=us --xlayouts='us'
# System language
lang en_US.UTF-8

# Firewall configuration
firewall --disabled
# Network information
network  --bootproto=dhcp --onboot=on

# Use network installation
url --url="http://192.168.87.8/ds/images_file/redhat/9_1_0"

%packages
@^graphical-server-environment
@development
@network-tools
cmake
nmap

%end

firstboot --disable

# Generated using Blivet version 3.4.0
ignoredisk --only-use=sda
# Clear the Master Boot Record
zerombr
# Partition clearing information
clearpart --all --initlabel
# Disk partitioning information
part /boot/efi --fstype="efi" --ondisk=sda --size=500
part / --fstype="xfs" --ondisk=sda --size=20480

# System timezone
timezone Asia/Taipei --utc

# Root password -> isc
rootpw --iscrypted --allow-ssh $6$RbszoRRIjQRZ242R$gUgxMqGuNTfjn3AqvZpo9cvdfdYEF6Ew40mapdj8ssJTzpJphmaQV3bOu4jOE5Z4J1RZPRNKcZO6gOQ9.4YWu.

# User password -> isaac/isaac
user --groups=wheel --name=isaac --password=$6$sifVtIrYa/L64vua$c5BVa3/BYedj/FBkRCOpLEQZqgefG1acJ.4t6Gg/UlkoS8uDw08sv5UpP8khIGhJfek/FaHNME5JkA.ZqIB.C0 --iscrypted --gecos="isaac"
